(this.webpackJsonpbookmaps=this.webpackJsonpbookmaps||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(19),c=a(12),i=a(21),l=a(20),o=a(0),s=a.n(o),h=a(17),m=a.n(h),p=a(5),u=a(33),k=a.n(u),d=a(34),C=a.n(d),v=(a(110),a(23)),y=a.n(v),b=[],f=void 0,E=[];var g=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeChapter:1,activeMark:"",MarksInChapter:[]},r.onChapterCellClick=r.onChapterCellClick.bind(Object(c.a)(r)),r.onMarkCellClick=r.onMarkCellClick.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"onChapterCellClick",value:function(e,t){var a=[],n=0;E[t-1].marks.forEach((function(e){a.push({id:n,value:e}),++n})),this.setState({activeChapter:t,MarksInChapter:a}),this.props.chapter_func()}},{key:"onMarkCellClick",value:function(e,t){this.setState({activeMark:t}),this.props.mark_func();var a=this.state.MarksInChapter[this.state.activeMark],n=!1;E[this.state.activeChapter-1].data.forEach((function(e){n&&b.push(e),"mark"===e[0]&&e[1]===a&&(n=!0)}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.f,{id:"chapter_select"},s.a.createElement(p.g,null,"\u0412\u044b\u0431\u043e\u0440 \u0433\u043b\u0430\u0432\u044b"),s.a.createElement(p.e,null,Array.prototype.map.call(E,(function(e){var t=this;return s.a.createElement(p.b,{expandable:!0,onClick:function(a){return t.onChapterCellClick(a,e.value[1])}},"\u0413\u043b\u0430\u0432\u0430 ",e.value[1],": ",e.value[0])}),this))),s.a.createElement(p.f,{id:"mark_select"},s.a.createElement(p.g,null,"\u0412\u044b\u0431\u043e\u0440 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),s.a.createElement(p.e,null,Array.prototype.map.call(this.state.MarksInChapter,(function(e){var t=this;return s.a.createElement(p.b,{expandble:!0,onClick:function(a){return t.onMarkCellClick(a,e.value[0])}},e.value[1])}),this))))}}]),a}(s.a.Component),S=document.documentElement.clientWidth,j=document.documentElement.clientHeight,M={height:j,width:S};M.height=S<j?S:M.height-102;var O=y.a.latLng(55.7522,37.6156),x=14,_=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"mapid",style:M})}},{key:"componentDidMount",value:function(){this.mymap=y.a.map("mapid").setView(O,x),y.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"black-horse/ck9423ydx3ezj1ip93plhxxbb",tileSize:256,accessToken:"sk.eyJ1IjoiYmxhY2staG9yc2UiLCJhIjoiY2thM3RlcWNkMG5tcTNlb2dxenU5bjRseCJ9.68X_Tq_a4Lk8iuUDFQCC_g"}).addTo(this.mymap)}},{key:"componentWillUnmount",value:function(){O=this.mymap.getCenter(),x=this.mymap.getZoom(),this.mymap=null}}]),a}(s.a.Component);!function(e){f=JSON.parse(e);for(var t=1;t!==f.chapters;t++)E.push({id:t,value:[f.data[t].name,t,f.data[t].marks]})}('{"book_name": "\u041c\u0430\u0441\u0442\u0435\u0440 \u0438 \u041c\u0430\u0440\u0433\u0430\u0440\u0438\u0442\u0430","chapters": 2,"data": {"1" : {"name": "\u041f\u0435\u0440\u0432\u0430\u044f \u0433\u043b\u0430\u0432\u0430","marks": [["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],["1", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["end", "\u041a\u043e\u043d\u0435\u0446"]], "data": [["mark", "0"],["\u041a\u043e\u0442", [55.7522, 37.6156], 2],["\u041a\u043e\u0442", [55.7622, 37.7156], 4, "smth"],\t["mark", "1"],["del", "\u041a\u043e\u0442"],["mark", "2"],["\u041c\u0430\u0441\u0442\u0435\u0440", [55.8522, 37.5956], 3]]},"2" : {"name": "\u0412\u0442\u043e\u0440\u0430\u044f \u0433\u043b\u0430\u0432\u0430","marks": [["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],["center", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["1", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["end", "\u041a\u043e\u043d\u0435\u0446"]],"data": [["mark", "0"],["\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e", [55.7522, 37.6156], 2],["\u0411\u0435\u0433\u0435\u043c\u043e\u0442", [55.7522, 37.6156], 4],\t["mark", "1"],["del", "\u0411\u0435\u0433\u0435\u043c\u043e\u0442"],["mark", "center"],["\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e", [55.8522, 37.5956], 3],["mark", "end"],["del", "\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e"]]}} }');var I=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeStory:"map",activeScreen:"intro",activePanelChapter:"chapter_select"},r.onStoryChange=r.onStoryChange.bind(Object(c.a)(r)),r.onIntroClick=r.onIntroClick.bind(Object(c.a)(r)),r.onChapterChange=r.onChapterChange.bind(Object(c.a)(r)),r.onMarkSelect=r.onMarkSelect.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"onIntroClick",value:function(e){this.setState({activeScreen:"things"})}},{key:"onChapterChange",value:function(e){this.setState({activePanelChapter:"mark_select"})}},{key:"onMarkSelect",value:function(e){this.setState({activePanelChapter:"chapter_select",activeStory:"map"})}},{key:"render",value:function(){return o.createElement(p.h,{activeView:this.state.activeScreen},o.createElement(p.k,{id:"intro"},o.createElement(p.c,{style:{paddingTop:60,paddingBottom:60,color:"gray"}},o.createElement("p",{style:{textAlign:"center"}},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),o.createElement("p",null,"\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0433\u0440\u0443\u043f\u043f\u043e\u0439 \u044e\u043d\u044b\u0445 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u043e\u0432 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432 \u0410\u043a\u0430\u0434\u0435\u043c\u0438\u0438 \u041a\u0430\u043b\u0430\u0448\u043d\u0438\u043a\u043e\u0432. \u041e\u043d\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043b\u044e\u0434\u044f\u043c, \u043b\u044e\u0431\u044f\u0449\u0438\u043c \u043a\u043d\u0438\u0433\u0438 \u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f, \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u0433\u0434\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437 \u043a\u043d\u0438\u0433\u0438, \u0438 \u0434\u0430\u0436\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c \u0435\u0451 \u0433\u0435\u0440\u043e\u0435\u0432. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0438 \u043b\u0435\u0433\u043a\u043e \u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438."),o.createElement("p",null,"\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0438 \u0441\u043e\u0432\u0441\u0435\u043c \u0441\u043a\u043e\u0440\u043e \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0440\u0430\u0434\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u043c\u0438 \u043d\u043e\u0432\u0438\u043d\u043a\u0430\u043c\u0438! \u0422\u0430\u043a \u0447\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043e\u0431\u0440\u0430\u0442\u043d\u0443\u044e \u0441\u0432\u044f\u0437\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u0438\u043b\u0438 \u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f!"),o.createElement(p.a,{size:"xl",mode:"secondary",onClick:this.onIntroClick},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),o.createElement(p.d,{id:"things",activeStory:this.state.activeStory,tabbar:o.createElement(p.i,null,o.createElement(p.j,{onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"},o.createElement(k.a,null)),o.createElement(p.j,{onClick:this.onStoryChange,selected:"chapter"===this.state.activeStory,"data-story":"chapter",text:"\u0413\u043b\u0430\u0432\u044b"},o.createElement(C.a,null)))},o.createElement(p.k,{id:"map",activePanel:"map"},o.createElement(p.f,{id:"map"},o.createElement(p.g,null,"\u041a\u0430\u0440\u0442\u0430"),o.createElement(_,null))),o.createElement(p.k,{id:"chapter",activePanel:this.state.activePanelChapter},o.createElement(g,{chapter_func:this.onChapterChange,mark_func:this.onMarkSelect}))))}}]),a}(o.Component);m.a.render(o.createElement(I,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a(111)}},[[95,1,2]]]);
//# sourceMappingURL=main.bbd5ea78.chunk.js.map