(this.webpackJsonpbookmaps=this.webpackJsonpbookmaps||[]).push([[0],{115:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return I}));var n=a(14),r=a.n(n),i=a(21),c=a(22),l=a(13),o=a(25),s=a(24),u=a(23),p=a(0),m=a(28),h=a.n(m),d=a(6),k=a(31),v=a.n(k),y=a(32),C=a.n(y),b=(a(114),a(12)),f=a.n(b),g=void 0,E=[];!function(t){g=JSON.parse(t);for(var e=1;e!==g.chapters;e++)E.push({key:e,value:[g.data[e].name,e,g.data[e].marks,g.data[e].data]})}('{ \t"book_name": "\u041c\u0430\u0441\u0442\u0435\u0440 \u0438 \u041c\u0430\u0440\u0433\u0430\u0440\u0438\u0442\u0430",\t"chapters": <\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e_\u0433\u043b\u0430\u0432>,\t"data": {\t\t"1": {\t\t\t"name": "\u041d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u0441 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u043c\u0438",\t\t\t"marks": [\t\t\t\t["0", "\u041d\u0430\u0447\u0430\u043b\u043e"]\t\t\t],\t\t\t"data": [\t\t\t\t["mark", "0"],\t\t\t\t["\u0411\u0435\u0440\u043b\u0438\u043e\u0437", [55.764628, 37.591891], 0],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764612, 37.591837], 3500]\t\t\t\t["\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439", [55.764614, 37.591837], 3500]\t\t\t] \t\t},\t\t"2": {\t\t\t"name": "\u0421\u0435\u0434\u044c\u043c\u043e\u0435 \u0434\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e",\t\t\t"marks": [\t\t\t\t["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],\t\t\t\t["1", "\u041f\u043e\u0431\u0435\u0433 \u0411\u0435\u0440\u043b\u0438\u043e\u0437\u0430"]\t\t\t],\t\t\t"data": [\t\t\t\t["mark", "0"],\t\t\t\t["\u0411\u0435\u0440\u043b\u0438\u043e\u0437", [55.764628, 37.591891], 0],\t\t\t\t["\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439", [55.764612, 37.591837], 0],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764614, 37.591837], 3500],\t\t\t\t["mark", "1"],\t\t\t\t["\u0411\u0435\u0440\u043b\u0438\u043e\u0437", [55.764950, 37.591728], 1500],\t\t\t\t["\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439", [55.764842, 37.591730], 0],\t\t\t\t["\u0411\u0435\u0440\u043b\u0438\u043e\u0437", [55.765102, 37.591717], 1500],\t\t\t\t["del", "\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439"],\t\t\t\t["del", "\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439"],\t\t\t\t["\u0411\u0435\u0440\u043b\u0438\u043e\u0437", [55.765121, 37.591829], 500],\t\t\t\t["del", "\u0411\u0435\u0440\u043b\u0438\u043e\u0437"],\t\t\t\t["\u0413\u043e\u043b\u043e\u0432\u0430 \u0411\u0435\u0440\u043b\u0438\u043e\u0437\u0430", [55.765063, 37.591899], 500]\t\t\t]\t\t},\t\t"3": {\t\t\t"name": "\u041f\u043e\u0433\u043e\u043d\u044f",\t\t\t"marks": [\t\t\t\t["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],\t\t\t\t["1", "\u041f\u043e\u0433\u043e\u043d\u044f"]\t\t\t],\t\t\t"data": [\t\t\t\t["mark", "0"],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.765088, 37.591733], 3500],\t\t\t\t["\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439", [55.764612, 37.591837], 0],\t\t\t\t["\u0420\u0435\u0433\u0435\u043d\u0442", [55.764632, 37.591941], 0],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764614, 37.591837], 2000],\t\t\t\t["mark", "1"],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764652, 37.591781], 0],\t\t\t\t["\u0420\u0435\u0433\u0435\u043d\u0442", [55.764650, 37.591892], 1000],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764597, 37.591859], 0],\t\t\t\t["\u0420\u0435\u0433\u0435\u043d\u0442", [55.764622, 37.591948], 1000],\t\t\t\t["del", "\u0420\u0435\u0433\u0435\u043d\u0442"],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764622, 37.591948], 1000],\t\t\t\t["\u041a\u043e\u0442", [55.764233, 37.591421], 0],\t\t\t\t["\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.764208, 37.591459], 0],\t\t\t\t["\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.764196, 37.591494], 1000],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764500, 37.591915], 500],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764400, 37.591857], 1000],\t\t\t\t["\u041a\u043e\u0442", [55.763613, 37.589995], 200],\t\t\t\t["\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.763579, 37.590027], 200],\t\t\t\t["\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.763555, 37.589952], 500],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764280, 37.591681], 1000],\t\t\t\t["\u041a\u043e\u0442", [55.763322, 37.589561], 200],\t\t\t\t["\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.763292, 37.589571], 0],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.764062, 37.591094], 500],\t\t\t\t["\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.763256, 37.589443], 500],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.763992, 37.590789], 1000],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.763868, 37.590413], 1000],\t\t\t\t["\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.762810, 37.588847], 200],\t\t\t\t["\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.762869, 37.589061], 500],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.763626, 37.590054], 1000],\t\t\t\t["\u041a\u043e\u0442", [55.762959, 37.588890], 500],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.763341, 37.589560], 2000],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.763051, 37.589153], 200],\t\t\t\t["\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.762728, 37.588756], 200],\t\t\t\t["\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442", [55.762829, 37.589155], 500],\t\t\t\t["\u041a\u043e\u0442", [55.763009, 37.588774], 1000],\t\t\t\t["del", "\u041f\u0435\u0440\u0432\u044b\u0439 \u0440\u0435\u0433\u0435\u043d\u0442"],\t\t\t\t["del", "\u0412\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0433\u0435\u043d\u0442"],\t\t\t\t["del", "\u041a\u043e\u0442"],\t\t\t\t["\u0411\u0435\u0437\u0434\u043e\u043c\u043d\u044b\u0439", [55.762954, 37.589003], 2500]\t\t\t],\t\t},\t}}');var x=[];function j(t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=f.a.latLng(55.7522,37.6156),M=14,I=function(t){Object(o.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).pause=!1,n.persons={},n.play=n.play.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"play",value:function(){var t=Object(u.a)(r.a.mark((function t(){var e,a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!0;case 1:if(!(x.length>0)){t.next=19;break}if("del"!==(a=x[0])[0]){t.next=7;break}a[1]in this.persons&&(this.persons[a[1]].remove(),this.persons[a[1]]=void 0),t.next=14;break;case 7:return a[0]in this.persons&&void 0!==this.persons[a[0]]&&this.persons[a[0]].remove(),n=f.a.latLng(a[1]),this.mymap.getBounds().contains(n)&&!e||this.mymap.flyTo(n),this.persons[a[0]]=f.a.popup().setLatLng(n).setContent("<br>"+a[0]+"<br/>").openOn(this.mymap),t.next=13,j(1e3*a[2]).then();case 13:e=!1;case 14:if(x.shift(),!this.pause){t.next=17;break}return t.abrupt("break",19);case 17:t.next=1;break;case 19:case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return p.createElement("div",{id:"mapid",style:{height:document.documentElement.clientHeight-120,width:document.documentElement.clientWidth}})}},{key:"componentDidMount",value:function(){this.mymap=f.a.map("mapid").setView(O,M).setMaxBounds(f.a.latLngBounds(f.a.latLng(56,37),f.a.latLng(55.5,38.25))),f.a.tileLayer("https://api.mapbox.com/styles/v1/black-horse/ck9423ydx3ezj1ip93plhxxbb/tiles/{z}/{x}/{y}?access_token={accessToken}",{minZoom:10,maxZoom:17,updateWhenZooming:!1,updateWhenIdle:!0,bounds:f.a.latLngBounds(f.a.latLng(56.25,35),f.a.latLng(55.25,39)),accessToken:"pk.eyJ1IjoiYmxhY2staG9yc2UiLCJhIjoiY2thMndiMDg5MDdjMDNsbGt1eHdoYjR6diJ9.z1NmmuGOTudn-b5H5NDtWg"}).addTo(this.mymap),this.play()}},{key:"componentWillUnmount",value:function(){O=this.mymap.getCenter(),M=this.mymap.getZoom(),this.mymap=null}}]),a}(p.Component),L=function(t){Object(o.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={activeStory:"map",activeScreen:"intro",activePanelChapter:"chapter_select",activeChapter:1,MarksInChapter:[]},n.onStoryChange=n.onStoryChange.bind(Object(l.a)(n)),n.onIntroClick=n.onIntroClick.bind(Object(l.a)(n)),n.onChapterCellClick=n.onChapterCellClick.bind(Object(l.a)(n)),n.onMarkCellClick=n.onMarkCellClick.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"onStoryChange",value:function(t){this.setState({activeStory:t.currentTarget.dataset.story})}},{key:"onIntroClick",value:function(t){this.setState({activeScreen:"things"})}},{key:"onChapterCellClick",value:function(t,e){var a=[],n=0;E[e-1].value[2].forEach((function(t){a.push({key:n,value:t}),++n})),this.setState({activeChapter:e,MarksInChapter:a}),this.setState({activePanelChapter:"mark_select"})}},{key:"onMarkCellClick",value:function(t,e){var a=this.state.MarksInChapter[e].value[0],n=!1;E[this.state.activeChapter-1].value[3].forEach((function(t){n&&"mark"!==t[0]&&x.push(t),"mark"===t[0]&&t[1]===a&&(n=!0)})),this.setState({activePanelChapter:"chapter_select",activeStory:"map"})}},{key:"render",value:function(){return p.createElement(d.g,{activeView:this.state.activeScreen},p.createElement(d.k,{id:"intro"},p.createElement(d.b,{style:{paddingTop:60,paddingBottom:60,color:"gray"}},p.createElement("p",{style:{textAlign:"center",verticalAlign:"middle"}},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),p.createElement("p",null,"\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0433\u0440\u0443\u043f\u043f\u043e\u0439 \u044e\u043d\u044b\u0445 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u043e\u0432 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432 \u0410\u043a\u0430\u0434\u0435\u043c\u0438\u0438 \u041a\u0430\u043b\u0430\u0448\u043d\u0438\u043a\u043e\u0432. \u041e\u043d\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043b\u044e\u0434\u044f\u043c, \u043b\u044e\u0431\u044f\u0449\u0438\u043c \u043a\u043d\u0438\u0433\u0438 \u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f, \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u0433\u0434\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437 \u043a\u043d\u0438\u0433\u0438, \u0438 \u0434\u0430\u0436\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c \u0435\u0451 \u0433\u0435\u0440\u043e\u0435\u0432. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0438 \u043b\u0435\u0433\u043a\u043e \u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438."),p.createElement("p",null,"\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0438 \u0441\u043e\u0432\u0441\u0435\u043c \u0441\u043a\u043e\u0440\u043e \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0440\u0430\u0434\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u043c\u0438 \u043d\u043e\u0432\u0438\u043d\u043a\u0430\u043c\u0438! \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043e\u0431\u0440\u0430\u0442\u043d\u0443\u044e \u0441\u0432\u044f\u0437\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u0438\u043b\u0438 \u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f."),p.createElement(d.a,{size:"xl",mode:"secondary",onClick:this.onIntroClick},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),p.createElement(d.c,{id:"things",activeStory:this.state.activeStory,tabbar:p.createElement(d.i,null,p.createElement(d.j,{onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"},p.createElement(v.a,null)),p.createElement(d.j,{onClick:this.onStoryChange,selected:"chapter"===this.state.activeStory,"data-story":"chapter",text:"\u0413\u043b\u0430\u0432\u044b"},p.createElement(C.a,null)))},p.createElement(d.k,{id:"map",activePanel:"map"},p.createElement(d.e,{id:"map"},p.createElement(d.f,null,"\u041a\u0430\u0440\u0442\u0430"),p.createElement(I,null))),p.createElement(d.k,{id:"chapter",activePanel:this.state.activePanelChapter},p.createElement(d.e,{id:"chapter_select"},p.createElement(d.f,null,"\u0412\u044b\u0431\u043e\u0440 \u0433\u043b\u0430\u0432\u044b"),p.createElement(d.d,null,Array.prototype.map.call(E,(function(t){var e=this;return p.createElement(d.h,{expandable:!0,onClick:function(a){return e.onChapterCellClick(a,t.value[1])}},"\u0413\u043b\u0430\u0432\u0430 ",t.value[1],": ",t.value[0])}),this))),p.createElement(d.e,{id:"mark_select"},p.createElement(d.f,null,"\u0412\u044b\u0431\u043e\u0440 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),p.createElement(d.d,null,Array.prototype.map.call(this.state.MarksInChapter,(function(t){var e=this;return p.createElement(d.h,{expandble:!0,onClick:function(a){return e.onMarkCellClick(a,t.value[0])}},t.value[1])}),this))))))}}]),a}(p.Component);h.a.render(p.createElement(L,null),document.getElementById("root"))},98:function(t,e,a){t.exports=a(115)}},[[98,1,2]]]);
//# sourceMappingURL=main.4043776d.chunk.js.map