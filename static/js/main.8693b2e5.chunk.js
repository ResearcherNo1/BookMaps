(this.webpackJsonpbookmaps=this.webpackJsonpbookmaps||[]).push([[0],{112:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(21),c=a(13),i=a(23),l=a(22),o=a(0),s=a.n(o),u=a(18),p=a.n(u),h=a(6),m=a(35),d=a.n(m),k=a(36),v=a.n(k),y=(a(112),a(19)),C=a.n(y),b=a(27),f=a(12),g=a.n(f),E=[],x=document.documentElement.clientWidth,j=document.documentElement.clientHeight;function S(e){return new Promise((function(t){return setTimeout(t,e)}))}var O={height:j,width:x};O.height=x<j?x:O.height-102;var M=g.a.latLng(55.7522,37.6156),I=14,L=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).pause=!1,r.persons={},r.play=r.play.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"play",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(E.length>0)){e.next=15;break}if("del"!==(t=E[0])[0]){e.next=6;break}t[1]in this.persons?(this.persons[t[1]].remove(),delete this.persons.datablock[1]):alert("\u041e\u0428\u0418\u0411\u041a\u0410: \u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441 \u043a\u0430\u0440\u0442\u044b \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430."),e.next=10;break;case 6:return t[0]in this.persons&&this.persons[t[0]].remove(),this.persons[t[0]]=g.a.popup().setLatLng(g.a.latLng(t[1][0],t[1][1])).setContent("<br>"+t[0]+"<br/>").openOn(this.mymap),e.next=10,S(1e3*t[2]).then();case 10:if(E.shift(),!this.pause){e.next=13;break}return e.abrupt("break",15);case 13:e.next=0;break;case 15:case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{id:"mapid",style:O})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mymap=g.a.map("mapid").setView(M,I).setMaxBounds(g.a.latLngBounds(g.a.latLng(56,37),g.a.latLng(55.5,38.25))),g.a.tileLayer("https://api.mapbox.com/styles/v1/black-horse/ck9423ydx3ezj1ip93plhxxbb/tiles/{z}/{x}/{y}?access_token={accessToken}",{minZoom:10,maxZoom:17,updateWhenZooming:!1,updateWhenIdle:!0,bounds:g.a.latLngBounds(g.a.latLng(56.25,35),g.a.latLng(55.25,39)),accessToken:"pk.eyJ1IjoiYmxhY2staG9yc2UiLCJhIjoiY2thMndiMDg5MDdjMDNsbGt1eHdoYjR6diJ9.z1NmmuGOTudn-b5H5NDtWg"}).addTo(this.mymap),this.play(),e.next=5,S(1e4).then((function(){t.pause=!0}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){M=this.mymap.getCenter(),I=this.mymap.getZoom(),this.mymap=null}}]),a}(s.a.Component),w=E,P=void 0,T=[];!function(e){P=JSON.parse(e);for(var t=1;t!==P.chapters;t++)T.push({key:t,value:[P.data[t].name,t,P.data[t].marks,P.data[t].data]})}('{"book_name": "\u041c\u0430\u0441\u0442\u0435\u0440 \u0438 \u041c\u0430\u0440\u0433\u0430\u0440\u0438\u0442\u0430","chapters": 2,"data": {"1" : {"name": "\u041f\u0435\u0440\u0432\u0430\u044f \u0433\u043b\u0430\u0432\u0430","marks": [["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],["1", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["end", "\u041a\u043e\u043d\u0435\u0446"]], "data": [["mark", "0"],["\u041a\u043e\u0442", [55.7522, 37.6156], 2],["\u041a\u043e\u0442", [55.7622, 37.7156], 4],\t["mark", "1"],["del", "\u041a\u043e\u0442"],["mark", "2"],["\u041c\u0430\u0441\u0442\u0435\u0440", [55.8522, 37.5956], 3]]},"2" : {"name": "\u0412\u0442\u043e\u0440\u0430\u044f \u0433\u043b\u0430\u0432\u0430","marks": [["0", "\u041d\u0430\u0447\u0430\u043b\u043e"],["center", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["1", "\u0421\u0435\u0440\u0435\u0434\u0438\u043d\u0430"],["end", "\u041a\u043e\u043d\u0435\u0446"]],"data": [["mark", "0"],["\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e", [55.7522, 37.6156], 2],["\u0411\u0435\u0433\u0435\u043c\u043e\u0442", [55.7522, 37.6156], 4],\t["mark", "1"],["del", "\u0411\u0435\u0433\u0435\u043c\u043e\u0442"],["mark", "center"],["\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e", [55.8522, 37.5956], 3],["mark", "end"],["del", "\u0410\u0437\u0430\u0437\u0435\u043b\u043b\u043e"]]}} }');var _=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeStory:"map",activeScreen:"intro",activePanelChapter:"chapter_select",activeChapter:1,MarksInChapter:[]},r.onStoryChange=r.onStoryChange.bind(Object(c.a)(r)),r.onIntroClick=r.onIntroClick.bind(Object(c.a)(r)),r.onChapterCellClick=r.onChapterCellClick.bind(Object(c.a)(r)),r.onMarkCellClick=r.onMarkCellClick.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"onIntroClick",value:function(e){this.setState({activeScreen:"things"})}},{key:"onChapterCellClick",value:function(e,t){var a=[],n=0;T[t-1].value[2].forEach((function(e){a.push({key:n,value:e}),++n})),this.setState({activeChapter:t,MarksInChapter:a}),this.setState({activePanelChapter:"mark_select"})}},{key:"onMarkCellClick",value:function(e,t){var a=this.state.MarksInChapter[t],n=!1;T[this.state.activeChapter-1].value[3].forEach((function(e){n&&"mark"!==e[0]&&w.push(e),"mark"===e[0]&&e[1]===a&&(n=!0)})),this.setState({activePanelChapter:"chapter_select",activeStory:"map"})}},{key:"render",value:function(){return o.createElement(h.h,{activeView:this.state.activeScreen},o.createElement(h.k,{id:"intro"},o.createElement(h.c,{style:{paddingTop:60,paddingBottom:60,color:"gray"}},o.createElement("p",{style:{textAlign:"center",verticalAlign:"middle"}},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),o.createElement("p",null,"\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0433\u0440\u0443\u043f\u043f\u043e\u0439 \u044e\u043d\u044b\u0445 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u043e\u0432 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432 \u0410\u043a\u0430\u0434\u0435\u043c\u0438\u0438 \u041a\u0430\u043b\u0430\u0448\u043d\u0438\u043a\u043e\u0432. \u041e\u043d\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043b\u044e\u0434\u044f\u043c, \u043b\u044e\u0431\u044f\u0449\u0438\u043c \u043a\u043d\u0438\u0433\u0438 \u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f, \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u0445 \u043c\u0435\u0441\u0442\u0430\u0445, \u0433\u0434\u0435 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u043b\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437 \u043a\u043d\u0438\u0433\u0438, \u0438 \u0434\u0430\u0436\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c \u0435\u0451 \u0433\u0435\u0440\u043e\u0435\u0432. \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0438 \u043b\u0435\u0433\u043a\u043e \u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438."),o.createElement("p",null,"\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0438 \u0441\u043e\u0432\u0441\u0435\u043c \u0441\u043a\u043e\u0440\u043e \u0441\u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0440\u0430\u0434\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u043c\u0438 \u043d\u043e\u0432\u0438\u043d\u043a\u0430\u043c\u0438! \u0422\u0430\u043a \u0447\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043e\u0431\u0440\u0430\u0442\u043d\u0443\u044e \u0441\u0432\u044f\u0437\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u0438\u043b\u0438 \u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f!"),o.createElement(h.a,{size:"xl",mode:"secondary",onClick:this.onIntroClick},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),o.createElement(h.d,{id:"things",activeStory:this.state.activeStory,tabbar:o.createElement(h.i,null,o.createElement(h.j,{onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"},o.createElement(d.a,null)),o.createElement(h.j,{onClick:this.onStoryChange,selected:"chapter"===this.state.activeStory,"data-story":"chapter",text:"\u0413\u043b\u0430\u0432\u044b"},o.createElement(v.a,null)))},o.createElement(h.k,{id:"map",activePanel:"map"},o.createElement(h.f,{id:"map"},o.createElement(h.g,null,"\u041a\u0430\u0440\u0442\u0430"),o.createElement(L,null))),o.createElement(h.k,{id:"chapter",activePanel:this.state.activePanelChapter},o.createElement(h.f,{id:"chapter_select"},o.createElement(h.g,null,"\u0412\u044b\u0431\u043e\u0440 \u0433\u043b\u0430\u0432\u044b"),o.createElement(h.e,null,Array.prototype.map.call(T,(function(e){var t=this;return o.createElement(h.b,{expandable:!0,onClick:function(a){return t.onChapterCellClick(a,e.value[1])}},"\u0413\u043b\u0430\u0432\u0430 ",e.value[1],": ",e.value[0])}),this))),o.createElement(h.f,{id:"mark_select"},o.createElement(h.g,null,"\u0412\u044b\u0431\u043e\u0440 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),o.createElement(h.e,null,Array.prototype.map.call(this.state.MarksInChapter,(function(e){var t=this;return o.createElement(h.b,{expandble:!0,onClick:function(a){return t.onMarkCellClick(a,e.value[0])}},e.value[1])}),this))))))}}]),a}(o.Component);p.a.render(o.createElement(_,null),document.getElementById("root"))},97:function(e,t,a){e.exports=a(114)}},[[97,1,2]]]);
//# sourceMappingURL=main.8693b2e5.chunk.js.map